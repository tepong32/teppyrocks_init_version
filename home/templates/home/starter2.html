{% load adminlte_helpers i18n %}
{% load static %}

<!-- INDEX PAGE -->
<!-- This page was overly-modified from that of the default AdminLTE3 starter.html.
Kindly just check comments for better understanding of its parts. This was not made by someone good with HTML, CSS or JavaScript. Logics and href links were the ones most changed.  -->

<!DOCTYPE html>
<html>
<head>
    <!-- this head part is default for AdminLTE -->
    {% block title_outer %}
        <title>{% block title %}{{ site.name }}{% endblock %}</title>
    {% endblock %}

    {% block meta %}
        <meta charset="utf-8">
        <meta http-equiv="X-UA-COMPATIBLE" content="IE=edge">
        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    {% endblock %}


    {% block stylesheets %}
        {% include 'adminlte/lib/_styles.html' %}
    {% endblock %}

    <!-- idk what this does but whatever -->
    {% block extra_head %}{% endblock %}

    <!-- added this part for pagedown header // see blog/blog_postform.html -->
    {% block pagedown_head %}{% endblock pagedown_head %}

</head>

<body class="hold-transition sidebar-mini sidebar-collapse layout-fixed">
    
        

<!-- header options whether user is logged-in or not -->
<!-- LOGGED-IN SIDEBAR -->
{% if user.is_authenticated %}
<div class="wrapper">
<aside class="main-sidebar sidebar-dark-secondary elevation-4">
    <!-- Brand Logo -->
      <a href="/" class="brand-link">
        <img src="/media/thehideout.jpg" alt="theHideOut! Logo" class="brand-image img-circle elevation-4" style="opacity: 1">
        <span class="brand-text font-weight-light">theHideOut!</span>
      </a>

    <div class="sidebar">
        <!-- Sidebar user panel -->      
        <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">

<!--                 <li class="nav-item">
                    <a href="{% url 'home' %}" class="nav-link">
                        <i class="nav-icon fa fa-home"></i> 
                        <p>Home</p>
                    </a>
                </li> -->
                {% if request.user.profile.user_group == "King" %}
                <li class="nav-item">
                    <a href="/admin" class="nav-link">
                    <i class="nav-icon fa fa-smile"></i>
                    <p>Admin</p>
                </a>
                </li>
                {% endif %}
                <li class="nav-item">
                        <a href="{% url 'todo-home' %}" class="nav-link">
                            <i class="nav-icon fa fa-bullhorn"></i> 
                            <p>Announcements</p>
                        </a>
                    </li>
                <li class="nav-item">
                        <a href="/lounge" class="nav-link">
                            <i class="nav-icon fa fa-coffee"></i> 
                            <p>Lounge</p>
                        </a>
                    </li>
                <li class="nav-item has-tree-view ">
                    <a href="#" class="nav-link">
                        <i class="nav-icon fas fa-bookmark"></i> <p>Bookmarks</p>
                        <p><i class="right fas fa-angle-left"></i>
                        </p>
                    </a>
                    <ul class="nav nav-treeview menu-open">
                            <li class="nav-item">
                                    <a href="{% url 'testing' %}" class="nav-link">
                                        <i class="nav-icon fas fa-exclamation-triangle"></i> Testing Page
                                    </a>
                                </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-user"></i> Another link
                            </a>
                        </li>
                    </ul>
                </li>
                <!-- logout button -->
                <li class="nav-item dropdown">
                    <a class="nav-link" data-toggle="dropdown" href="#">
                        <i class="nav-icon fa fa-power-off"></i>
                        <p>Logout</p>
                    </a>
                    <div class="dropdown-menu dropdown-menu-sm dropdown-menu">
                        <a href="{% url 'logout' %}" class="dropdown-item">
                            <i class="fas fa-power-off fa-spin mr-2"></i> Confirm Log out
                        </a>
                    </div>
                </li>

            </ul>
        </nav>   
    </div>
</aside>
<!-- /LOGGED-IN SIDEBAR -->

<!-- LOGGED-IN HEADER -->
<div class="container-fluid">

    <div class="col">
      <!-- post panel area -->
            <div class="card card-primary">
              <div class="card-body" style="padding: 3px">
                <div class="card card-widget widget-user">

              <!-- bg color for profiles depending on user_group -->
              <!-- other user_group color options are tbd -->
              {% if request.user.profile.user_group == "King" %}
                <div class="widget-user-header bg-purple">
              {% elif request.user.profile.user_group == "Pawn" %}
                <div class="widget-user-header bg-primary">
              {% endif %}

                <!-- icon displayed based on user_group -->
                <h3 class="widget-user-username">
                  <!-- USER BADGES DEPENDING ON USER_GROUP -->
              {% if request.user.profile.user_group == "Pawn" %}
                <i class="fas fa-chess-pawn ml-3"></i>
              {% elif request.user.profile.user_group == "Rook" %}
                <i class="fas fa-chess-rook ml-3"></i>
              {% elif request.user.profile.user_group == "Knight" %}
                <i class="fas fa-chess-knight ml-3"></i>
              {% elif request.user.profile.user_group == "Bishop" %}
                <i class="fas fa-chess-bishop ml-3"></i>
              {% elif request.user.profile.user_group == "Queen" %}
                <i class="fas fa-chess-queen ml-3"></i>
              {% elif request.user.profile.user_group == "King" %}
                <i class="fas fa-chess-king ml-3"></i>
              {% endif %}
                </h3>

          <div class="content-section">
            <div class="row">
              <!-- this col is hidden under the sidebar for desktop views at 100% -->
              <!-- sidebar toggle only visible (by-default) in mobile views since the
                sidebar is automatically hidden -->
              <div>
              <i class="nav-item">
                <a class="nav-link" data-widget="pushmenu" href="#">
                    <i class="fas fa-stream"></i>
                </a>
              </i>
              </div>

              <div class="media col">
                <img class="rounded-circle account-img elevation-5" src="{{ request.user.profile.image.url }}" style="height: 60px; width: 60px;">
                <div class="media-body">
                  <div class="row">
                    <h4 class="account-heading ml-3"><strong> {{ request.user.username }} </strong></h4>
                  </div>
                  <div style="background-color: transparent; padding: 0.2rem">
                    <a class='btn btn-dark btn-outline-light' href="/home">
                        <li class="nav-icon fa fa-home"></li> 
                    </a>

                    <a class='btn btn-dark btn-outline-light ml-2' href="{% url 'post-new' %}">
                      +<li class="fa fa-comments" style="color: cyan"></li> 
                    </a>
                    <a class='btn btn-dark btn-outline-light ml-2' href="{% url 'todo-new' %}">
                      +<li class="nav-icon fa fa-exclamation" style="color: cyan"></li>
                    </a>
                  </div>
                </div> <!-- create post div -->
              
              <!-- NAVIGATION LINKS -->
              <div class="col">
                <nav class="main-header navbar navbar-expand navbar-dark navbar-light">
                  <ul class="navbar-nav ml-auto mr-auto">
                    <li class="nav-item">
                      <a class="nav-link" href="{% url 'profile' request.user.username %}" >
                        <i class="far fa-user"></i>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="{% url 'profile' request.user.username %}" >
                        <i class="fa fa-feed"></i>
                      </a>
                    </li>
                    <!-- Messages Dropdown Menu -->
                    <li class="nav-item dropdown">
                      <a class="nav-link" data-toggle="dropdown" href="#">
                        <i class="far fa-comments"></i>
                        <span class="badge badge-danger navbar-badge">3</span>
                      </a>
                      <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                        <a href="#" class="dropdown-item">
                          <!-- Message Start -->
                          <div class="media">
                            <img src="../../media/thehideout.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                            <div class="media-body">
                              <h3 class="dropdown-item-title">
                                Brad Diesel
                                <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                              </h3>
                              <p class="text-sm">Call me whenever you can...</p>
                              <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                            </div>
                          </div>
                          <!-- Message End -->
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
                      </div>
                    </li>
                    <!-- Notifications Dropdown Menu -->
                    <li class="nav-item dropdown">
                      <a class="nav-link" data-toggle="dropdown" href="#">
                        <i class="far fa-bell"></i>
                        <span class="badge badge-warning navbar-badge">15</span>
                      </a>
                      <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                        <span class="dropdown-item dropdown-header">15 Notifications</span>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                          <i class="fas fa-envelope mr-2"></i> 4 new messages
                          <span class="float-right text-muted text-sm">3 mins</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                          <i class="fas fa-users mr-2"></i> 8 friend requests
                          <span class="float-right text-muted text-sm">12 hours</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                          <i class="fas fa-file mr-2"></i> 3 new reports
                          <span class="float-right text-muted text-sm">2 days</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
                      </div>
                    </li>
                  </ul>
                </nav>


              </div>
            </div>
          </div>

          </div>
        </div>
      </div>
      </div>
    <!-- / post panel area-->
    </div>
<!-- /LOGGED-IN HEADER -->

<!-- NOT LOGGED-IN HEADER -->
{% else %}
    <div class="wrapper">
    <nav class="main-header navbar navbar-expand navbar-gray navbar-light">

         <!-- LEFT NAVBAR LINKS -->
        <!-- RIGHT NAVBAR LINKS -->
        <ul class="navbar-nav ml-auto">
            <ul class="nav navbar-nav">
            <li class="nav-item d-none d-sm-inline-block">
                <a href="{% url 'login' %}" class="nav-link">Log In</a>
            </li>
            <li class="nav-item d-none d-sm-inline-block">
                <a href="{% url 'register' %}" class="nav-link">Register</a>
            </li>

            </ul>
        </ul>
    </nav>
<!-- /NOT LOGGED-IN HEADER -->

<!-- NOT LOGGED-IN SIDEBAR -->
<aside class="main-sidebar sidebar-dark-primary elevation-4">

      <!-- Sidebar user panel -->
      <div class="sidebar">
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
       <!-- Brand Logo -->
        <a href="/" class="brand-link">
            <img src="/media/thehideout.jpg" alt="theHideOut! Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
            <span class="brand-text font-weight-light">theHideOut!</span>
        </a>
      </div>

        <!-- sidebar menu: : style can be found in sidebar.less -->
        
        <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">

                <li class="nav-item">
                    <a href="#" class="nav-link active">
                        <i class="nav-icon fas fa-tachometer-alt"></i> 
                        <p>Home</p>
                    </a>
                </li>
                <li class="nav-item">
                        <a href="#" class="nav-link">
                            <i class="nav-icon fas fa-tachometer-alt"></i> 
                            <p>Coming Soon</p>
                        </a>
                    </li>
                <li class="nav-item has-tree-view ">
                    <a href="#" class="nav-link">
                        <i class="nav-icon fas fa-object-group"></i> <p>Sub menu</p>
                        <p><i class="right fas fa-angle-left"></i>
                        </p>
                    </a>
                    <ul class="nav nav-treeview menu-open">
                            <li class="nav-item">
                                    <a href="#" class="nav-link">
                                        <i class="nav-icon fas fa-circle"></i> link
                                    </a>
                                </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link active">
                                <i class="nav-icon fas fa-user"></i> Another link
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nav>   
    </div>
</aside>

{% endif %}
<!-- /NOT LOGGED-IN SIDEBAR -->




<!-- MAIN CONTENT AREA -->
<!-- logic is inside landing.html -->
{% block landing_page %}

{% endblock landing_page %}
<!-- /MAIN CONTENT block -->



<footer class="main-footer">
    <div class="float-right d-none d-sm-block">
        <b>Version</b> 0.1
    </div>

    <strong>Copyright &copy; 2020.
        
    </strong> All rights
    reserved.  
</footer>



<!-- jquery script for the marked and markdown part of css -->
<!-- place above bootstrap // not sure if there's any reason why -->
<script
  src="https://code.jquery.com/jquery-3.4.1.slim.js"
  integrity="sha256-BTlTdQO9/fascB1drekrDVkaKd9PkwBymMlHOiG+qLI="
  crossorigin="anonymous"></script>
<!-- fontawesome -->
<script src="https://use.fontawesome.com/2363b49f19.js"></script>

{% block javascript %}
    {% include 'adminlte/lib/_scripts.html' %}
{% endblock %}

{% block extra_js %}{% endblock %}

{% block extra_foot %}{% endblock %}

{% block extrascripts %}{% endblock extrascripts %}


<!-- jquery script for the marked part of css // google: "marked.min.js cdn"-->
<!-- place above bootstrap // not sure if there's any reason why -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.8.0/marked.min.js"></script>
<script src="{% static 'js/jquery.bootstrap.modal.forms.min.js' %}"></script>


<!-- might need to study more about jquery...or always copy-paste! -->
<!-- this shows what part of the page/site we want to turn into markdown. In this case, the content-markdown classes for divs (put into the divs for {{post.content}}) -->
<script type="text/javascript">
    $(document).ready(function(){
        $(".content-markdown").each(function(){
            var content = $(this).text()
            var markedContent = marked(content)
            $(this).html(markedContent)
        });


        $(".post-detail-item img").each(function(){
            $(this).addClass("img-responsive")
        });

        // for modals/popup create post window
        $("#quickpost").modalForm({
            formURL: "{% url 'quickpost' %}"});

        // datepicker testing
        $('#datetimepicker').data("DateTimePicker").FUNCTION()
    });
</script>



</body>
</html>
